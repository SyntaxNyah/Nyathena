[Server]
# The address to listen on. Leave blank to listen on any. If you don't know what you're doing, leave this blank.
addr = ""

# The port to listen for connections on.
port = 27016

# The hostname or IP address to advertise to the master server.
# If left blank, the master server will use the IP address from which the advertisement request is received.
# Set this to your public hostname (e.g., "hatsune.miku.pizza") or IP address if the detected IP is not correct
# (e.g., when behind NAT, using port forwarding, or when the server should be accessed via a specific domain).
advertise_hostname = ""

# Whether to listen for websocket (WebAO) connections.
enable_webao = false

# The port to listen for websocket (WebAO) connections on.
webao_port = 27017

# Whether to listen for secure websocket (WebAO over WSS) connections.
enable_webao_secure = false

# The port to listen for secure websocket (WebAO over WSS) connections on.
# Typically port 443 when using Cloudflare or other reverse proxies.
webao_secure_port = 443

# Path to TLS certificate file (optional - leave empty if using a reverse proxy like Cloudflare).
# When both tls_cert_path and tls_key_path are provided, the server will handle TLS directly.
# When empty, the server listens on plain HTTP and expects a reverse proxy to handle TLS termination.
tls_cert_path = ""

# Path to TLS private key file (optional - leave empty if using a reverse proxy like Cloudflare).
tls_key_path = ""

# Set to true if running behind a reverse proxy (nginx, Apache, etc.)
# When enabled, the master server will advertise the external ports instead of internal listening ports
reverse_proxy_mode = false

# External HTTP port exposed by reverse proxy (only used when reverse_proxy_mode = true)
# This is the port clients connect to, not the internal listening port
reverse_proxy_http_port = 80

# External HTTPS port exposed by reverse proxy (only used when reverse_proxy_mode = true)
# This is the port clients connect to, not the internal listening port
reverse_proxy_https_port = 443

# Example nginx configuration for reverse proxy setup:
# When using reverse_proxy_mode, configure Athena to listen on an internal port (e.g., 3141)
# and nginx to forward from external ports (80/443) to that internal port.
# 
# IMPORTANT: Both webao_port and webao_secure_port should be set to the SAME internal port (3141)
# because nginx handles the external port routing (80 and 443) and forwards both to this single
# internal port. Athena doesn't need separate ports since nginx performs the port demultiplexing.
#
# server {
#     listen 80;
#     server_name hatsune.miku.pizza;
#     
#     location / {
#         proxy_pass http://localhost:3141;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection "Upgrade";
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }
# }
#
# server {
#     listen 443 ssl;
#     server_name hatsune.miku.pizza;
#     
#     ssl_certificate /path/to/cert.pem;
#     ssl_certificate_key /path/to/key.pem;
#     
#     location / {
#         proxy_pass http://localhost:3141;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection "Upgrade";
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }
# }
#
# With this setup, set:
#   enable_webao = true
#   webao_port = 3141                    # Internal port - where Athena actually listens
#   enable_webao_secure = true
#   webao_secure_port = 3141             # Same internal port - nginx routes both 80 and 443 here
#   tls_cert_path = ""                   # Empty - nginx handles TLS termination
#   tls_key_path = ""                    # Empty - nginx handles TLS termination
#   reverse_proxy_mode = true            # Enable reverse proxy mode
#   reverse_proxy_http_port = 80         # External port - what clients see for HTTP
#   reverse_proxy_https_port = 443       # External port - what clients see for HTTPS
#
# The master server will then advertise:
#   ws://hatsune.miku.pizza:80
#   wss://hatsune.miku.pizza:443

# The name of your server. This is used both on the server list, and within the server.
name = "Unnamed Server"

# The description of your server.
description = "A brand new server!"

# Sets the server's message of the day (MoTD)
# This is sent to every player when they first join the server, or with /motd.
motd = "Welcome to my server!"

# The maximum amount of players who can join the server at once.
max_players = 100

# The maximum amount of bytes that players can send in a message. Long messages can slow down clients, 
# so don't make this too large.
max_message_length = 256

# Sets the detault length of bans.
# This must be a number followed by a unit. Example: "3w" - three weeks.
# Valid units are "s" (second), "m" (minute), "h" (hour), "d" (day), "w" (week).
default_ban_duration = "3d"

# Sets the number of client connections that can be made from the same IP, also known as "multiclienting".
# Set to 0 to disable multiclient limiting.
multiclient_limit = 16

# Sets the URL for the server's WebAO assets.
# If this is blank, vanilla assets will be used.
# When set, WebSocket connections from the custom asset URL's domain will be automatically allowed.
# The URL should include the protocol (e.g., "https://example.com/assets").
asset_url = ""

# Sets the URL for the server's Discord webhook.
# If this is blank, the discord webhook will be disabled.
# To setup the webhook, follow the instructions here (https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks)
# and set this to the URL of your webhook.
webhook_url = ""

# Sets the Discord role ID to ping via the webhook when a modcall is received.
# Right-click the role in Server Settings > Roles and select "Copy Role ID" (requires Developer Mode).
# If this is blank, no role will be pinged.
webhook_ping_role_id = ""

# Sets the maximum number of dice that can be rolled at once.
max_dice = 100

# Sets the maximum number of sides a rolled dice can have.
max_side = 100

# Sets the maximum number of statements a recorded testimony can contain.
max_testimony = 10

# Rate limiting: Maximum number of messages (IC, OOC, music) a player can send within the time window.
# Players who exceed this limit will be automatically kicked from the server.
# This helps prevent spam and resource exhaustion. Set to 0 to disable rate limiting.
# Default: 20 messages
message_rate_limit = 20

# Rate limiting: Time window in seconds for counting messages.
# For example, with message_rate_limit=20 and message_rate_limit_window=10,
# players can send up to 20 messages every 10 seconds.
# Default: 10 seconds
message_rate_limit_window = 10

[Logging]
# Sets the number of actions (IC chat messages, OOC chat messages, judge actions, etc.) each area should store.
# When a user calls a mod, this buffer will be flushed to a report file for review.
log_buffer_size = 150

# Sets the log level. Events of lower levels will not be logged.
# Valid levels: debug, info, warning, error, fatal
log_level = "info"

# Sets the path to the log directory.
# This directory will be used for storing report files, the server audit log, and the server log.
log_directory = "logs"

# Sets which log methods to use.
# Methods: stdout, log_file
log_methods = [ "stdout" ]

# Enable per-area folder logging with daily rotation.
# When enabled, each area gets its own folder under logs/ with daily log files.
# Format: logs/AreaName/AreaName-YYYY-MM-DD.txt
# Each log line includes: [HH:MM:SS] | ACTION | CHARACTER | IPID | HDID | SHOWNAME | OOC_NAME | MESSAGE
enable_area_logging = false

[MasterServer]

# Whether or not to advertise your server on the master server, which will make it discoverable by players.
# If you want to keep your server private, set this as false.
advertise = false

# The address of the master server. You shouldn't change this unless you know what you're doing.
addr = "https://servers.aceattorneyonline.com/servers"

[Discord]

# Discord bot token. Leave blank to disable the Discord bot.
# Create a bot at https://discord.com/developers/applications and copy the token here.
bot_token = ""

# The ID of the Discord server (guild) where the bot should register slash commands.
# Right-click your server name in Discord and select "Copy Server ID" (requires Developer Mode).
guild_id = ""

# The ID of the Discord role that is allowed to use moderation commands.
# Right-click the role in Server Settings > Roles and select "Copy Role ID".
# Leave blank to allow all users to run commands (not recommended).
mod_role_id = ""
